---
title: 设计模式解读
date: 2019-06-15 15:35:34
tags: JS
---
## 1.文档目的
系统记录常见设计模式的js代码实现，加深理解设计模式的魅力。
参考网址：[w3c设计模式](https://www.w3cschool.cn/deep_learn_javascript/deep_learn_javascript-ljp4285i.html)

## 2.实例研读
### 2.1构造函数模式
```
// 构造函数模式：用于创建特定类型（类）的对象[可接收参数以便第一次创建对象时设置成员值]
// 注：这里将属性和方法都写在构造函数中，那么每个新的实例都会不同，若需共享，应绑定至prototype
function Car(model, year, miles) {
    this.model = model;
    this.year = year;
    this.miles = miles;
}

//注意：这里我们使用了Object.prototype.方法名，而不是Object.prototype
//主要是用来避免重写定义原型prototype对象

Car.prototype.output= function () {
    return this.model + "走了" + this.miles + "公里";
};

var tom = new Car("大叔", 2009, 20000);
var dudu = new Car("Dudu", 2010, 5000);

console.log(tom.output());
console.log(dudu.output());
```
### 2.2单例模式
```
//单例模式：保证一个类只有一个实例
//实现的方法是先判断实例是否存在，若存在则直接返回，否则再创建
//用途：单例作为命名空间提供者，保证在某空间中提供一个唯一的访问点
var SingletonTester = (function () {

    //参数：传递给单例的一个参数集合
    function Singleton(args) {

        //设置args变量为接收的参数或者为空（如果没有提供的话）
        var args = args || {};
        //设置name参数
        this.name = 'SingletonTester';
        //设置pointX的值
        this.pointX = args.pointX || 6; //从接收的参数里获取，或者设置为默认值
        //设置pointY的值
        this.pointY = args.pointY || 10;

    }

    //实例容器
    var instance;

    var _static = {
        name: 'SingletonTester',

        //获取实例的方法
        //返回Singleton的实例
        getInstance: function (args) {
            if (instance === undefined) {
                instance = new Singleton(args);
            }
            return instance;
        }
    };
    return _static;
})();

var singletonTest = SingletonTester.getInstance({ pointX: 5 });
console.log(singletonTest.pointX); // 输出 5 
```
### 2.3工厂模式
```
//工厂模式定义了一个用于创建对象的接口，这个接口由子类决定实例化哪一个类。
//该模式使一个类的实例化延迟到了子类。
//工程模式应该有厂长，负责调度实施子类发出的任务
var productManager = {};

productManager.createProductA = function () {
    console.log('ProductA');
}

productManager.createProductB = function () {
    console.log('ProductB');
}

productManager.factory = function (typeType) {
    return new productManager[typeType];
}

productManager.factory("createProductA");
```
