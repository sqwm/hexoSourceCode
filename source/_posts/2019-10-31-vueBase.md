---
title: vueBase
date: 2019-10-31 15:16:37
tags: Vue
---
## 1.文档目的
快速了解核心vue核心基础用法,比如mixin,slot,style,event等
参考:[组件通信方式](https://www.jianshu.com/p/7df2576a8a2b)

## 2.实例
mixin.js
```
const MIXIN = {
  data () {
    return {
      arr: ['我', '来', '自', '父', '组', '件']
      url: require('@/assets/images/ad/001.png')
    }
  }
}
export default MIXIN
```
Comp.vue子组件
```
<template>
  <div class="page">
    <div class="header">
      <slot name="header"></slot>
    </div>
    <div class="main">
      <h4 :style="activeSubStyle">我是子组件本身的内容,样式被父组件通过对象参数传值的形式改变</h4>
      <h5>我的颜色是被父组件通过穿透方式改变的</h5>
      <p :class="{'sub-class': isActiveSubClass}">{{list}}</p>
      <slot>
        <p>如果父组件没用插入内容,我将作为默认出现</p>
      </slot>
      <button style="border: 1px solid red;" @click="onClick">子组件触发父组件的事件</button>
    </div>
  </div>
</template>
<script>
// 组件封装原则:独立性
export default {
  props: {
    list: {
      type: Array,
      default: () => [],
      required: true
    },
    isActiveSubClass: {
      type: Boolean,
      default: false,
      required: false
    },
    activeSubStyle: {
      type: Object,
      default: () => {},
      required: false
    }
  },
  methods: {
    onClick () {
      this.$emit('handleParentMethod', '来自子组件的值')
    }
  }
}
</script>
<style lang="less" scoped>
// 不会与父组件同名样式重复
.page {
  .sub-class{
    text-align: center;
  }
}
</style>
```
Test.vue父组件
```
<template>
  <div class="page">
    <h3>演示slot,mixin,组件通信等简单应用</h3>
    <!-- 组件通信分析:
         1)组件关系:父子,兄弟,隔代
         2)通信方法
          1>props/$emit
          2>$attrs/$listeners
          3>$parent/$children与ref
          4>provide/inject
          5>vuex
     -->
    <!-- page-sub使得父组件可以对子组件的根元素进行布局 -->
    <Comp :list = 'arr' class="page-sub" :isActiveSubClass="true" :activeSubStyle="activeSubStyle" @handleParentMethod="handleChildMethod">
      <h3 slot="header">我是标题具名slot</h3>
      <p>从父组件分发的内容,非具名slot</p>
    </Comp>
  </div>
</template>
<script>
import Comp from './Comp'
import mixin from './mixin'
export default {
  components: { Comp },
  mixins: [mixin],
  // 这里设置的data和methods会与mixin中合并,有冲突时覆盖
  data () {
    return {
      activeSubStyle: { color: 'blue' }
    }
  },
  methods: {
    handleChildMethod (e) {
      console.log(e, '---我是父组件的事件,被子组件触发了')
    }

  }
}
</script>
<style lang="less" scoped>
@import '~../../style/global.less';
.page{
  &-sub{
    padding: 0 15px;
    // 若希望在父组件中通过穿透控制带有scoped属性的子组件样式,需要使用'>>>'或'/deep/'
    // 更合适的做法是通过props传递boolean类型的值,动态绑定子组件的style和class
    /deep/ h5{
      color: red;
    }
  }
}
</style>
```