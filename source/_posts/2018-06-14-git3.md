---
title: Git系列之撤销
date: 2018-06-14 22:05:42
tags: Git
---
## 1.工作流的状态
要使用git进行版本控制，必须深刻理解并认识git工作流中的几个状态，如图（1）所示。
{% asset_img image001.png this is first image %}
<center>**图（1）**</center>
本地环境可以细分为3中状态：【功能尚未完毕之前，不用轻易提交至远程】
**工作区**，修改文档尚未添加至版本控制
**暂存区**，修改文档已添加至版本控制，但尚未提交至版本库
**版本库**，修改文档提交至版本库，文档状态变化
远程环境只有一种状态：
**远程分支**，修改文档被提交至远程代码仓库
【名词辨识】
master/branch : 分支，master为项目默认分支，也叫主分支
head : 本地当前版本库的指针，指向最新的提交
origin : 默认的远程版本库名称
## 2.工作区撤销修改
该状态尚未添加至版本控制，即尚未执行git add，此时撤销不可恢复。
撤销执行命令git checkout .即可。
## 3.暂存区撤销修改
该状态已添加至版本控制，即已执行git add，修改内容处于暂存区
撤销执行命令git reset HEAD .即可，原理是用版本库内容替换缓存区内容，同时工作目录修改保留
## 4.版本库撤销修改
该状态已添加至版本库，即已执行git commit,修改内容处于版本库。
撤销命令如下：
git reset --hard HEAD~1	撤销提交并删除修改
git reset --soft HEAD~1	撤销提交并将修改恢复至**暂存区**
git reset HEAD~1		撤销提交并就修改恢复至**工作区**
## 5.远程分支撤销修改
思路：先回退本地版本库至指定版本库【同4】，再强制推送指定版本库内容至远程分支，如下图所示。
{% asset_img image002.png this is first image %}
也可以用--soft保持修改内容至暂存区，如下图所示。
{% asset_img image003.png this is first image %}
